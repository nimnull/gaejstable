{%- extends "base.html" %}
{%- set page_title = "Records" %}
{%- block content %}
{%- include "catalog/_list_records.html" %}
{%- include "pagination.html" %}
{%- endblock content %}
{%- block js_extra %}
<script type="text/javascript">

(function($) {
  var baseColor = $(".row.record > div:first-child").css('background-color');
  var t;
  var actions = {
    'created': function(linkObj) {
      $(linkObj).text('unmark');
    },
    'deleted': function(linkObj) {
      $(linkObj).text('mark');
    }
  };

  $(".record").hover(
    function(evt) {
      $target = $(evt.currentTarget);
      t = setTimeout(function() {
        $target.find('.mark').fadeIn(300);
      }, 600);
    },
    function(evt) {
      clearTimeout(t);
      $target = $(evt.currentTarget);
      $target.find('.mark').fadeOut(500);
    });

  $('.row.record > div:first-child .mark a').click(function(evt) {
      $.get(evt.currentTarget.href, function(resp) {
        if (resp.status == 'success') {
          actions[resp.data](evt.currentTarget);
        }
    });
    return false;
  });
})(jQuery);
</script>
{% endblock -%}
